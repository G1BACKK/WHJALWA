<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Join Our WhatsApp Group</title>

  <!-- Meta Pixel Code -->
  <script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
    
    fbq('init', '677028811789830');
    fbq('track', 'PageView');
    
    function trackWhatsAppJoin() {
      fbq('track', 'Lead', {
        content_name: 'WhatsApp Color Prediction',
        content_category: 'WhatsApp Subscription',
        value: 0.00,
        currency: 'INR'
      });
      redirectToWhatsApp();
    }
    
    function redirectToWhatsApp() {
      const phoneNumber = "919021915194";
      const message = encodeURIComponent("hello how are u");
      const device = getDeviceInfo();
      
      console.log('Device info:', device); // For debugging
      
      if (device.isMobile) {
        if (device.isAndroid) {
          // Android: Force app opening with multiple methods
          const methods = [
            // Method 1: Android Intent (most reliable for Android)
            `intent://send?phone=${phoneNumber}&text=${message}#Intent;scheme=whatsapp;package=com.whatsapp;end`,
            // Method 2: WhatsApp scheme
            `whatsapp://send?phone=${phoneNumber}&text=${message}`,
            // Method 3: Alternative intent
            `intent://send?phone=${phoneNumber}&text=${message}#Intent;scheme=whatsapp;package=com.whatsapp;S.browser_fallback_url=https%3A%2F%2Fplay.google.com%2Fstore%2Fapps%2Fdetails%3Fid%3Dcom.whatsapp;end`
          ];
          
          // Try each method with delays
          let methodIndex = 0;
          const tryMethod = () => {
            if (methodIndex < methods.length) {
              try {
                window.location.href = methods[methodIndex];
                methodIndex++;
                setTimeout(tryMethod, 800);
              } catch (e) {
                methodIndex++;
                tryMethod();
              }
            }
          };
          tryMethod();
          
        } else if (device.isIOS) {
          // iOS: Multiple attempts to force app
          const iosLinks = [
            `whatsapp://send?phone=${phoneNumber}&text=${message}`,
            `https://wa.me/${phoneNumber}?text=${message}`,
            `whatsapp://send?text=${message}&phone=${phoneNumber}`
          ];
          
          // Try iOS methods
          iosLinks.forEach((link, index) => {
            setTimeout(() => {
              window.location.href = link;
            }, index * 600);
          });
          
        } else {
          // Other mobile devices
          window.location.href = `whatsapp://send?phone=${phoneNumber}&text=${message}`;
        }
      } else {
        // Desktop: Try to force app opening
        const desktopMethods = [
          `whatsapp://send?phone=${phoneNumber}&text=${message}`,
          `https://wa.me/${phoneNumber}?text=${message}`
        ];
        
        desktopMethods.forEach((method, index) => {
          setTimeout(() => {
            if (index === 0) {
              // Try app first
              window.location.href = method;
            } else {
              // Then try web version
              window.open(method, '_blank');
            }
          }, index * 1000);
        });
      }
    }
  </script>
  <noscript>
    <img height="1" width="1" style="display:none" 
         src="https://www.facebook.com/tr?id=677028811789830&ev=PageView&noscript=1"/>
  </noscript>
  <!-- End Meta Pixel Code -->

  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', sans-serif;
      background: radial-gradient(circle at center, #1e1e2f, #121220);
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      height: 100vh;
      overflow: hidden;
      text-align: center;
    }

    .content {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      width: 100%;
      max-width: 500px;
      padding: 20px;
    }

    .logo-container {
      position: relative;
      width: 180px;
      height: 180px;
      border-radius: 50%;
      overflow: hidden;
      margin-bottom: 20px;
      border: 3px solid #00ffc8;
      box-shadow: 0 0 30px rgba(0, 255, 200, 0.5);
    }

    .logo-img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .channel-name {
      font-size: 1.5em;
      margin-bottom: 10px;
      color: #00ffc8;
      font-weight: bold;
      text-shadow: 0 0 10px rgba(0, 255, 200, 0.5);
    }

    h1 {
      font-size: 2.8em;
      margin: 15px 0;
      position: relative;
      display: inline-block;
      color: #ff00aa;
      text-shadow: 
        0 0 10px #ff00aa,
        0 0 20px #ff00aa,
        0 0 30px #ff00aa;
      padding: 0 20px;
      animation: glow 1.5s ease-in-out infinite alternate;
    }

    @keyframes glow {
      0% { text-shadow: 0 0 10px #ff00aa; }
      100% { text-shadow: 0 0 20px #ff00aa, 0 0 30px #ff00aa, 0 0 40px #ff00aa; }
    }

    .button {
      margin-top: 25px;
      padding: 18px 40px;
      font-size: 1.6em;
      font-weight: bold;
      color: black;
      background: #00ffc8;
      border: none;
      border-radius: 50px;
      box-shadow: 0 0 30px #00ffc8;
      cursor: pointer;
      animation: buttonGlow 2s infinite ease-in-out;
      text-decoration: none;
      transition: transform 0.3s;
      position: relative;
      overflow: hidden;
    }

    .button:hover {
      transform: scale(1.05);
    }

    @keyframes buttonGlow {
      0% { box-shadow: 0 0 15px #00ffc8; }
      50% { box-shadow: 0 0 30px #00ffc8; }
      100% { box-shadow: 0 0 15px #00ffc8; }
    }

    .sub {
      font-size: 1em;
      color: #ccc;
      margin-top: 12px;
    }

    footer {
      position: absolute;
      bottom: 10px;
      font-size: 0.8em;
      opacity: 0.5;
    }
  </style>
</head>

<body>
  <!-- Main Content -->
  <div class="content">
    <div class="logo-container">
      <video autoplay loop muted playsinline class="logo-img">
        <source src="https://files.catbox.moe/fswqj2.mp4" type="video/mp4">
        <img src="https://i.ibb.co/ZRkyWq8W/IMG-7998.jpg" alt="ZIYA SURESHOT">
      </video>
    </div>
    <div class="channel-name">COLOR PREDICTION VIP</div>
    <h1>DAILY WINNING TIPS</h1>
    <button onclick="trackWhatsAppJoin()" class="button">CHAT ON WHATSAPP</button>
    <div class="sub">Get color prediction signals directly on WhatsApp!</div>
  </div>

  <footer>&copy; 2024 Color Prediction Network</footer>

  <script>
    // Enhanced device detection
    function getDeviceInfo() {
      const userAgent = navigator.userAgent.toLowerCase();
      return {
        isMobile: /android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(userAgent),
        isAndroid: /android/i.test(userAgent),
        isIOS: /iphone|ipad|ipod/i.test(userAgent),
        isChrome: /chrome/i.test(userAgent),
        isSafari: /safari/i.test(userAgent) && !/chrome/i.test(userAgent),
        isFirefox: /firefox/i.test(userAgent)
      };
    }

    // Auto-redirect after 3 seconds with tracking
    setTimeout(function() {
      fbq('track', 'ViewContent', {
        content_name: 'Auto Redirect to WhatsApp',
        content_category: 'WhatsApp'
      });
      redirectToWhatsApp();
    }, 3000);

    // Add click handler for immediate testing
    document.addEventListener('DOMContentLoaded', function() {
      const button = document.querySelector('.button');
      if (button) {
        button.addEventListener('click', function(e) {
          e.preventDefault();
          trackWhatsAppJoin();
        });
      }
    });
  </script>
</body>
</html>
